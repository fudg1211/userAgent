function dialog(e){var t=e.className,n=e.funs,r=e.url||"dialog",i="tpl/"+r+".ejs?v=123",s;e.loadingContent?s=e.loadingContent:$.ajax({async:!1,url:i,success:function(e){s=e}});var o=document.createElement("div"),u=document.createElement("div"),a=document.createElement("div"),f=document.createElement("div");o.className="cover",u.className="dialog",f.className="clear",t&&$(o).addClass(t),a.className="dialogContent",a.innerHTML=s,u.appendChild(a),o.appendChild(u),document.body.appendChild(o),document.body.appendChild(f),o.style.visibility="hidden";var l=document.body.scrollTop,c=u.offsetHeight,h=l+window.innerHeight/2-c/2-10,p=document.body.scrollHeight;h<20&&(h=20);var d=0,v=function(){d++,c=u.offsetHeight,!c&&d<20?setTimeout(function(){v()},100):(h=l+window.innerHeight/2-c/2-10,h<=l&&(h=l),u.style.top=h.toString()+"px",o.style.visibility="visible")};v();var m=0,g=function(){var e=f.offsetTop,t=e>p?e:p;o.style.height=t.toString()+"px",m++,e<p&&m<20?setTimeout(g,100):$(f).remove()};g();var y=$(u).find(".dialogButton");return n&&n.length&&y.each(function(e,t){n[e]&&$(this).click(function(){n[e]()})}),$(u).find(".J-dialogClose").click(function(){return $(o).remove(),$(f).remove(),e.closeBack&&e.closeBack(),!1}),o}function init(e){window.initData={}}(function(){var e=window,t={};t.Version="0.1.0",t.$=e.jQuery||e.Zepto||e.$;var n=function(e){return toString.call(e)=="[object Function]"},r=function(e){return toString.call(e)=="[object String]"},i=function(e){return toString.call(e)=="[object Array]"},s=function(e){return toString.call(e)=="[object Object]"},o=function(e){var t={},n=function(e,t){if(s(e))for(k in e)e.hasOwnProperty(k)&&(s(e[k])?(t[k]={},arguments.callee(e[k],t[k])):i(e[k])?(t[k]=[],arguments.callee(e[k],t[k])):t[k]=e[k]);else if(i(e))for(k in e)s(e[k])?(t[k]={},arguments.callee(e[k],t[k])):i(e[k])?(t[k]=[],arguments.callee(e[k],t[k])):t[k]=e[k]}(e,t);return t},u=[].slice,a=t.events={on:function(e,t,n){this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){var r=this,i=function(){r.off(e),t.apply(this,arguments)};this.on(e,i,n)},off:function(e,t,n){var r,i,s,o,u,a,f,l;if(!e&&!t&&!n)return this._events={},this;o=e;for(u=0,a=o.length;u<a;u++)e=o[u],delete this._events[e]},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1),n=this._events[e],r=this._events.all;return n&&f(n,t),r&&f(r,arguments),this}},f=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t)}},l=t.Module=function(e,t){var n=e||{};t||(t={}),this.cid="c",this.attributes={},this.set(n,t),this.changed={}};l.prototype={idAttribute:"id",get:function(e){return this.attributes[e]},has:function(e){return this.get(e)!=null},set:function(e,t,n){s(t)&&(t=o(t));var r,i,u,a,f,l,h,p;if(e==null)return this;typeof e=="object"?(i=e,n=t):(i={})[e]=t,n||(n={}),u=n.unset,f=n.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=Object.create(this.attributes),this.changed={}),p=this.attributes,h=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)t=i[r],c(p[r],t)||a.push(r),c(h[r],t)?delete this.changed[r]:this.changed[r]=t,u?delete p[r]:p[r]=t;if(!f){a.length&&(this._pending=!0);for(var d=0,v=a.length;d<v;d++)this.trigger("change:"+a[d],this,p[a[d]],n)}if(l)return this;if(!f)while(this._pending)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},clear:function(){var e={};for(var t in this.attributes)e[t]=void 0;return this.set(e,_.extend({},options,{unset:!0}))},extend:function(e){$.extend(this,e)}};var c=function(e,t,r,i){r||(r=[]),i||(i=[]);if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;var s=toString.call(e);if(s!=toString.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var o=r.length;while(o--)if(r[o]==e)return i[o]==t;var u=e.constructor,a=t.constructor;if(u!==a&&!(n(u)&&u instanceof u&&n(a)&&a instanceof a))return!1;r.push(e),i.push(t);var f=0,l=!0;if(s=="[object Array]"){f=e.length,l=f==t.length;if(l)while(f--)if(!(l=c(e[f],t[f],r,i)))break}else{for(var h in e)if(e.hasOwnProperty(h)){f++;if(!(l=t.hasOwnProperty(h)&&c(e[h],t[h],r,i)))break}if(l){for(h in t)if(t.hasOwnProperty(h)&&!(f--))break;l=!f}}return r.pop(),i.pop(),l};$.extend(l.prototype,a);var h=t.View=function(e){this.initializer.apply(this,arguments),this.init.apply(this,arguments)};h.prototype={proxy:function(e){return $.proxy(e,this)},include:function(e){$.extend(this.fn,e)},init:function(){},initializer:function(e){for(var t in e)this[t]=e[t];this.elements&&this.refreshElements(),this.events&&this.delegateEvents()},$:function(e){return $(e,this.el)},eventSplitter:/^(\w+)\s*(.*)$/,delegateEvents:function(){for(var e in this.events){var t=this.events[e],n=this.proxy(this[t]),r=function(e){return function(t){e(this,t)}}(n),i=e.match(this.eventSplitter),s=i[1],o=i[2];o===""?this.el.bind(s,r):(o.search(/_rel$/)!==-1&&(o=this[o+"Selector"]),this.el.delegate(this[o]?this[o]:o,s,r))}},refreshElements:function(){var e=this;for(var t in this.elements){var n=this.elements[t];if(n.search(/_rel$/)!==-1){this[n+"Selector"]=t;var r=n.replace(/_rel$/,"");this[n]=function(t,n){return function(){return e[n]=e.$(t)}}(t,r)}else{var i=this.$(t);this[n]=i}}}};var p=function(e){var t=this,n=function(){t.apply(this,arguments)};return n.prototype=Object.create(this.prototype),$.extend(n.prototype,e),n};l.extend=h.extend=p,$.extend(h.prototype,a),window.FishMvc=t})(),define("lib/Fish",function(){});var JSON;JSON||(JSON={}),function(){function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("lib/json2",function(){}),define("lib/dialog",function(){}),define("app/global/configs",{apiHost:"/activity/"}),define("app/global/storage",[],function(){var e={}.toString,t=window.$;return{local:{set:function(e,t){localStorage.setItem(e,t)},get:function(e){return localStorage.getItem(e)},remove:function(e){return localStorage.removeItem(e)},removeAll:function(e){var t=localStorage;for(e in t)this.remove(e)}},session:{set:function(e,t){sessionStorage.setItem(e,t)},get:function(e){return sessionStorage.getItem(e)},remove:function(e){sessionStorage.removeItem(e)},removeAll:function(e){var t=sessionStorage;for(e in t)this.remove(e)}},cookie:{setSession:function(e,t,n){var r=this._getCookieValue(e,t,n);document.cookie=r},setLocal:function(e,t,n){var r=this._getCookieValue(e,t,n)+this._getExpires(1e3);document.cookie=r},setLocalMaxSeconds:function(e,t,n,r){var i=(new Date).getTime()+n*1e3;this.pointTime(e.trim(),t,i,r)},pointTime:function(e,t,n,r){var i=new Date(n),s=this._getCookieValue(e,t,r)+";expires="+i.toGMTString()+this._getPath(r);document.cookie=s},pointMidNight:function(e,t,n,r){var i=new Date;n=parseInt(n)||1;var s=i.getFullYear()+"-"+i.getMonth()+"-"+(i.getDate()+n);this.pointTime(e,t,s,r)},get:function(e){var t=null,n=e+"=";return document.cookie.length>0&&(offset=document.cookie.indexOf(n),offset!=-1&&(offset+=n.length,end=document.cookie.indexOf(";",offset),end==-1&&(end=document.cookie.length),t=unescape(document.cookie.substring(offset,end)))),t},remove:function(e){this.setSession(e,"",-1)},removeAll:function(){var e=document.cookie,t=e.split(";"),n;for(var r=0;r<t.length;r++)t[r]&&(n=t[r].split("="),n[0]&&this.remove(n[0].trim()))},_getExpires:function(e){if(e){var t=new Date;return t.setDate(t.getDate()+e),";expires="+t.toGMTString()}return},_getCookieValue:function(e,t,n){return e.trim()+"="+encodeURIComponent(t)+this._getPath(n)},_getPath:function(e){return e?";path="+e:""}}}}),define("app/global/hack",[],function(){var e={}.toString,t=window.navigator.userAgent,n=window.location.href,r=window.$,i=r("#body");/android\s*2\.3\.\d/i.test(t)&&(/android236/i.test(n)||(n+="&android236",window.location.href=n)),/ipad/i.test(t)&&r(".fenxiangPYQ").hide()}),define("app/global/common",["./configs","./storage","./hack"],function(e,t,n){var r={}.toString,i=window.$,s=window.navigator.userAgent;return window.com=common={isFunction:function(e){return r.call(e)=="[object Function]"},isString:function(e){return r.call(e)=="[object String]"},isArray:function(e){return r.call(e)=="[object Array]"},isObject:function(e){return r.call(e)=="[object Object]"},isIOS:function(){return/ipad/i.test(s)||/iphone/i.test(s)?!0:!1},storage:t,configs:e,render:function(e,t,n){n=n?n:e+"Dest",(new EJS({element:e})).update(n,{md:t})},getRender:function(e,t){return(new EJS({element:e})).render({md:t})},showLoading:function(){var e={url:"loading",className:"loadingDialog"};dialog(e)},removeLoading:function(){i(".loadingDialog").remove()},_i18n:function(e){return chrome.i18n.getMessage(e)},ajax:function(e){var t=this;e.hideLoading||this.showLoading();var n=function(t){if(e.checkStatus)return!0;var n=0,r;return t.status&&t.status.code&&(n=t.status.code,r=t.status.description),n?(r&&(alert("网络超时"),initData.onDataError=!0),!1):(initData.onDataError=!1,!0)},r={type:"POST",dataType:"json",url:t.configs.host,data:"",success:function(e){},error:function(){initData.onDataError=!0},complete:function(e){t.removeLoading()}};this.mix(r,e),r.success=function(t){n(t)&&e.success(t)},i.ajax(r)},mix:function(e,t){var n=this.clon(t),r;for(r in n)n.hasOwnProperty(r)&&n[r]&&(e[r]=n[r]);n=null},utf16to8:function(e){var t,n,r,i;t="",r=e.length;for(n=0;n<r;n++)i=e.charCodeAt(n),i>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t},clon:function(e){var t={},n=this;this.isArray(e)&&(t=[]);var r=function(e,t){if(n.isObject(e))for(k in e)e.hasOwnProperty(k)&&(n.isObject(e[k])?(t[k]={},arguments.callee(e[k],t[k])):n.isArray(e[k])?(t[k]=[],arguments.callee(e[k],t[k])):t[k]=e[k]);else if(n.isArray(e))for(k in e)n.isObject(e[k])?(t[k]={},arguments.callee(e[k],t[k])):n.isArray(e[k])?(t[k]=[],arguments.callee(e[k],t[k])):t[k]=e[k]}(e,t);return t},alert:function(e,t){t=t||{},str="",str='<div class="center"> '+e+' </div> <div class="center tagA">';if(t.buttons)for(var n=0;n<t.buttons.length;n++){var r=t.buttons[n][1]||"";str+='<button class="dialogButton m-button '+r+'">'+t.buttons[n][0]+"</button>"}str+="</div>",t.loadingContent=str,dialog(t)},showTip:function(e,t){t=t||3e3,e&&(i("#tip").html(e).css({bottom:20,opacity:1}),setTimeout(function(){i("#tip").css({bottom:-40,opacity:0})},t))},gather:{},queryArray:[],query:function(e){if(!e)return!1;if(this.queryArray.length)return this.queryArray[e];var t=window.location.href;t=t.replace(/#[^&]*$/,"");var n=/\?(.+)/,r=t.match(n);if(r&&r[1]){var i=r[1].split("&");for(a in i){var s=i[a].split("="),o=s[0],u=s[1];this.queryArray[o]=u}return this.queryArray[e]}return""}},init(common),common}),define("app/global/data",["./common"],function(e){return{getData:function(){var t=[[1,"Default",""],[2,"iPhone","Mozilla/5.0 (iPhone; CPU iPhone OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3"],[3,"iPad","Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A334 Safari/7534.48.3"],[4,"Android","Mozilla/5.0 (Linux; Android 4.1.1; Nexus 7 Build/JRO03D) AppleWebKit/535.19 (KHTML, like Gecko) Chrome/18.0.1025.166  Safari/535.19"],[5,"WinPhone","Mozilla/5.0 (compatible; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 920)"],[6,"Chrome","Mozilla/5.0 (Windows NT 6.2; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.94 Safari/537.36"],[7,"Firefox","Mozilla/5.0 (Windows NT 6.2; WOW64; rv:21.0) Gecko/20100101 Firefox/21.0"],[8,"Safari","Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_6; en-US) AppleWebKit/533.20.25 (KHTML, like Gecko) Version/5.0.4 Safari/533.20.27"],[9,"IE6","Mozilla/4.0 (Windows; MSIE 6.0; Windows NT 5.2)"],[10,"IE7","Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)"],[11,"IE8","Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)"],[12,"IE9","Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)"],[13,"IE10","Mozilla/5.0 (compatible; WOW64; MSIE 10.0; Windows NT 6.2)"]],n=JSON.parse(e.storage.local.get("customData"));if(n&&n[0][0]==="Default"){for(var r=0;r<n.length;r++){var i=r+1;n[r].reverse(),n[r].push(i),n[r].reverse()}t=n,e.storage.local.removeAll()}var s=e.storage.local.get("customData");return s?(s=JSON.parse(s),s):(e.storage.local.set("customData",JSON.stringify(t)),t)},getById:function(e){e=parseInt(e);var t=this.getData();for(var n=0;n<t.length;n++)if(t[n][0]===e)return t[n];return!1},getByName:function(e){var t=this.getData();for(var n=0;n<t.length;n++)if(t[n][1]===e)return t[n];return!1},updateById:function(e,t,n){e=parseInt(e);if(!e||!t||!n)return!1;var r=this.getData();for(var i=0;i<r.length;i++)if(r[i][0]===e){r[i][1]=t,r[i][2]=n;break}this.save(r)},updateByName:function(e,t){var n=this.getByName(e);return n?this.updateById(n[0],e,t):!1},delById:function(e){e=parseInt(e);var t=this.getData();for(var n=0;n<t.length;n++)if(t[n][0]===e){t.splice(n,1);break}return this.save(t)},delByName:function(e){var t=this.getByName(e);return t?this.delById(t[0]):!1},add:function(e,t){var n=this.getData(),r=n[n.length-1][0];return n.push([r+1,e,t]),this.save(n),n},save:function(t){return e.storage.local.set("customData",JSON.stringify(t)),!0}}}),define("app/index",["./global/common","./global/data"],function(e,t){var n=FishMvc.View.extend({init:function(){this.startApp(),setTimeout(function(){$("#comments").animate({opacity:0},1e3,undefined,function(){$("#comments").remove()})},3e3)},elements:{".J-setUserAgent":"setUserAgent_rel","#Default":"Default",".orangeButton":"orangeButton_rel","#list":"list","#add":"add","#del":"del",".addSetDiv":"addSetDiv","#addUaSubmit":"addUaSubmit_rel","#addUaName":"addUaName_rel","#addUaValue":"addUaValue_rel","#uaId":"uaId_rel","#reset":"reset","#edit":"edit",".J-setUserAgentDiv":"JsetUserAgentDiv_rel",".delItem":"delItem_rel"},events:{"click setUserAgent_rel":"doSetUserAgent","click add":"doAdd","click addUaSubmit_rel":"doAddUaSubmit","click reset":"doResetData","click edit":"doEdit","click del":"doDel","click delItem_rel":"doDelItem"},startApp:function(){var e=t.getData();this.editNum=!1,this.doStatus=null;var n="",r,i;for(var s=0;s<e.length;s++)r=e[s][1],i="ua_"+e[s][0].toString(),n+='<div class="setUserAgentDiv J-setUserAgentDiv"><button class="m-button J-setUserAgent" id="'+i+'"  val="'+e[s][2]+'">'+r+"</button></div>";this.list.html(n),this.backgroundPage=chrome.extension.getBackgroundPage();var o=this.backgroundPage.uaType;o||(o="ua_1"),this.add.prop("disabled",!1),this.edit.prop("disabled",!1),this.del.prop("disabled",!1),this.changeType(o)},doSetUserAgent:function(e){e=$(e),this.doStatus==="edit"?this.doEditItem(e):this.doSetUserAgentNext(e)},doSetUserAgentNext:function(t){var n=$(t[0]).attr("id");this.setUserAgentByType(n)&&(this.changeType(n),chrome.tabs.getSelected(function(){var t=arguments[0].url;/^chrome:/i.test(t)?e.showTip(e._i18n("msg_success")):chrome.tabs.reload()}))},setUserAgentByType:function(e){var n=this.backgroundPage.uaType;if(n===e||!n&&e==="ua_1")return!1;e==="ua_1"||!e?chrome.browserAction.setIcon({path:"images/icons/icon-48.png"}):chrome.browserAction.setIcon({path:"images/icons/icon-48-1.png"});var r=this.filterType(e);if(r){var i=t.getById(r);this.sendMessageToBg(i[2],e)}return!0},filterType:function(e){return isNaN(parseInt(e))?/^ua_/i.test(e)?parseInt(e.replace(/ua_/i,"")):!1:parseInt(e)},sendMessageToBg:function(e,t){var n={uaValue:e,uaType:t};chrome.runtime.sendMessage(n,function(){})},changeType:function(e){this.orangeButton_rel().removeClass("orangeButton").prop("disabled",!1),$("#"+e).addClass("orangeButton").prop("disabled",!0),e==="au_1"&&chrome.browserAction.setIcon({path:"images/icons/icon-48.png"})},doDel:function(){if(this.doStatus==="del")return this.doStatus=null,this.startApp(),!1;this.edit.prop("disabled",!0),this.add.prop("disabled",!0),this.doStatus="del";var e=this.backgroundPage.uaType,t='<span class="delItem closeItem"></span>';this.JsetUserAgentDiv_rel().each(function(){var n=$(this).children().eq(0),r=n.parent().text().trim(),i=n.attr("id");$(this).children("button").attr("disabled",!0).css({color:"#ccc",cursor:"default"}),r!=="Default"&&i!==e&&$(this).append(t)})},doAdd:function(){var e={url:"add",className:"addSetDiv"};return this.doAddDialog=dialog(e),!1},doAddUaSubmit:function(){var n=this.addUaName_rel().val().trim();if(!n)return this.addUaName.attr("placeholder",e._i18n("msg_setName")).focus(),!1;if(n.toLowerCase()==="default"){this.addUaName.attr("placeholder",e._i18n("msg_noDefault")).focus();return}var r=this.addUaValue_rel().val().trim();if(!r)return this.addUaValue.attr("placeholder",e._i18n("msg_setValue")).focus(),!1;var i=this.uaId_rel().val();if(i){i=this.filterType(i);var s=t.getByName(n);if(s&&s[0]!==parseInt(i))return e.showTip('<span class="error">'+e._i18n("msg_nameAlready")+"</span>"),!1;t.updateById(i,n,r)}else{if(t.getByName(n))return e.showTip('<span class="error">'+e._i18n("msg_nameAlready")+"</span>"),!1;t.add(n,r)}$(this.doAddDialog).remove();var o=this.doStatus;this.startApp(),o==="edit"&&this.doEdit(),e.showTip(e._i18n("msg_success"))},saveData:function(t,n){var r,i=0,s=this.data,o=!1;if(t==="Default"||!t)return!1;if(this.editNum){for(;i<s.length;i++)if(s[i][0]===t&&i!==this.editNum){o=!0;break}if(o)return e.showTip('<span class="error">'+e._i18n("msg_nameAlready")+"</span>"),!1;s[this.editNum]=[t,n,1,(new Date).getTime()],this.setUserAgent_rel().eq(this.editNum).attr("id",t).text(t),this.editNum=!1}else{for(;i<s.length;i++)if(s[i][0]===t){o=!0;break}if(o)return e.showTip('<span class="error">'+e._i18n("msg_nameAlready")+"</span>"),!1;r=[t,n],s.push(r)}return e.storage.local.set("customData",JSON.stringify(s)),!0},doResetData:function(){var t=this,n={className:"doResetData",buttons:[[e._i18n("msg_yes")],[e._i18n("msg_no"),"J-dialogClose"]],funs:[function(){e.storage.local.remove("customData"),t.backgroundPage.uaType="ua_1",chrome.browserAction.setIcon({path:"images/icons/icon-48.png"}),setTimeout(function(){window.location.reload()},100)}]};return e.alert('<span class="center">'+e._i18n("msg_resetNiceA")+"<br/>"+e._i18n("msg_resetNiceB")+"</span>",n),!1},doEdit:function(){if(this.doStatus==="edit")return this.doStatus=null,this.startApp(),!1;this.add.prop("disabled",!0),this.del.prop("disabled",!0);var t=this.backgroundPage.uaType;this.doStatus="edit",this.JsetUserAgentDiv_rel().addClass("editing"),e.showTip(e._i18n("msg_editNoticeA")+"<br/> "+e._i18n("msg_editNoticeB"),6e3)},doEditItem:function(e){var t=e.text(),n=e.attr("val"),r=e.attr("id"),i=this;if(t==="Default")return!1;this.doAdd(),setTimeout(function(){i.addUaName_rel().val(t),i.addUaValue_rel().val(n),i.uaId_rel().val(r)},100)},doDelItem:function(t){var n=this,r={className:"doResetData",buttons:[[e._i18n("msg_yes"),"J-dialogClose"],[e._i18n("msg_no"),"J-dialogClose"]],funs:[function(){n.doDelItemSubmit(t)}]};e.alert('<span class="center">'+e._i18n("msg_delNotice"),r)},doDelItemSubmit:function(e){if(this.doStatus!=="del")return!1;var n=$(e).prev().attr("id");return n==="ua_1"||!n?!1:(n=this.filterType(n),t.delById(n),this.startApp(),this.doDel(),!1)},checkDataItem:function(e){var t=this.data,n=!1;for(var r=0;r<t.length;r++)if(t[r][0]===e){n=!0;break}return n}}),r=new n({el:$("#body")});e.gather.indexController=r}),requirejs.config({baseUrl:"js",deps:["./lib/Fish","./lib/json2"]}),requirejs(["./lib/Fish","./lib/json2","./lib/dialog","./app/index"],function(){}),define("app",function(){});